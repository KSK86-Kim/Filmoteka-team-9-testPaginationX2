{"version":3,"sources":["webpack:///./js/refs.js","webpack:///./js/api.js","webpack:///./js/pluginOn.js","webpack:///./index.js","webpack:///./templates/movieCard.hbs","webpack:///./templates/btnPagination.hbs"],"names":["refs","searchInput","document","querySelector","moviesCardsGallery","movieInfoModal","loadWatchedBtn","loadQueueBtn","addWatchedBtn","addQueueBtn","btnNextPagination","btnPrevPagination","paginationControls","API_KEY","ApiService","selectControl","this","page","totalPagas","movies","searchQuery","watched","queue","_watchedFromLocalStorage","_queueFromLocalStorage","fetchMovieByID","id_movie","fetch","BASE_URL_MOVIEID","then","response","status","Error","json","movieAdapter","poster_path","original_title","original_name","vote_average","release_date","first_air_date","imgSrc","generatePosterPath","title","rating","releaseDate","imageName","fetchSearchMoviesList","query","BASE_URL_SEARCH","responce","total_pages","console","log","fetchPopularMoviesList","BASE_URL_TRENDING","pagination","current","last","code","addButtonWithIndex","addButtonInput","i","innerHTML","index","fetchWatchedMoviesList","fetchQueueMoviesList","fetchModalMovie","loadWatchedMovies","watchedString","localStorage","getItem","JSON","parse","loadQueueMovies","queueString","addWatchedMovies","movieId","addQueueMovies","push","setItem","stringify","renderMovieCards","moviesArray","insertAdjacentHTML","movieCard","renderMovie","movieObj","incrementPage","resetPage","goToPrevPage","goToNextPage","error","require","defaults","pluginError","text","closer","sticker","delay","shadow","debounce","Api","clear","movieAdaptedandRender","fetchPopularMoviesListTEST","onSearch","event","preventDefault","target","value","total_results","onSearchTEST","results","map","movie","loadWatched","classList","add","remove","loadQueue","goToPage","goToPageOnSearch","window","addEventListener","currentPage","getElementsByTagName","contains","nodeName","a","Number","textContent","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"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","file":"main.9a5ded4289c2bd1d7dfc.js","sourcesContent":["const refs = {\r\n  searchInput: document.querySelector('.search-input'),\r\n  // searchBtn: document.querySelector('search-button'),\r\n  moviesCardsGallery: document.querySelector('.movie__list'),\r\n  movieInfoModal: document.querySelector('.modal-movie'),\r\n  loadWatchedBtn: document.querySelector('[data-modal-watched]'),\r\n  loadQueueBtn: document.querySelector('[data-modal-queue]'),\r\n  addWatchedBtn: document.querySelector('[data-add-watched]'),\r\n  addQueueBtn: document.querySelector('[data-add-queue]'),\r\n  btnNextPagination: document.querySelector('#next-pagination'),\r\n  btnPrevPagination: document.querySelector('#prev-pagination'),\r\n  paginationControls: document.querySelector('.pagination-controls__list'),\r\n};\r\nexport default refs;\r\n","const API_KEY = 'e25e680121e89083bb4ba7c0772c65fc';\r\nconst BASE_URL_TRENDING = 'https://api.themoviedb.org/3/trending/all/day';\r\nconst BASE_URL_SEARCH = 'https://api.themoviedb.org/3/search/movie';\r\nconst BASE_URL_MOVIEID = 'https://api.themoviedb.org/3/movie';\r\nconst POSTER_URL = 'https://themoviedb.org/t/p/w220_and_h330_face';\r\n\r\nimport movieCard from '../templates/movieCard.hbs';\r\nimport btnPogination from '../templates/btnPagination.hbs';\r\nimport refs from './refs';\r\n\r\nexport default class ApiService {\r\n  #delta = 2;\r\n  constructor(selectControl) {\r\n    this.page = 1;\r\n    this.totalPagas = 0;\r\n    this.movies = [];\r\n\r\n    this.searchQuery = '';\r\n    this.watched = [];\r\n    this.queue = [];\r\n    this._watchedFromLocalStorage = [];\r\n    this._queueFromLocalStorage = [];\r\n    this.selectControl = selectControl;\r\n  }\r\n\r\n  fetchMovieByID(id_movie) {\r\n    return fetch(`${BASE_URL_MOVIEID}/${id_movie}?api_key=${API_KEY}`).then(\r\n      response => {\r\n        if (response.status === '404') throw new Error();\r\n        response.json();\r\n      },\r\n    );\r\n  }\r\n\r\n  movieAdapter({\r\n    poster_path,\r\n    original_title,\r\n    original_name,\r\n    vote_average,\r\n    release_date,\r\n    first_air_date,\r\n  }) {\r\n    return {\r\n      //имена imgSrc, title, rating, releaseDate СВЕРИТЬ с именами в ПРАВИЛЬНОМ шаблоне карточки\r\n      imgSrc: this.generatePosterPath(poster_path),\r\n      title: original_title || original_name,\r\n      rating: vote_average,\r\n      releaseDate: release_date || first_air_date,\r\n    };\r\n  }\r\n\r\n  generatePosterPath(imageName) {\r\n    return `${POSTER_URL}${imageName}`;\r\n  }\r\n\r\n  fetchSearchMoviesList(query) {\r\n    return fetch(\r\n      `${BASE_URL_SEARCH}?api_key=${API_KEY}&query=${query}&page=${this.page}`,\r\n    )\r\n      .then(responce => responce.json())\r\n      .then(movies => {\r\n        this.totalPagas = movies.total_pages;\r\n        console.log(movies);\r\n        console.log(this.totalPagas);\r\n        return movies;\r\n      });\r\n  }\r\n\r\n  fetchPopularMoviesList() {\r\n    return fetch(`${BASE_URL_TRENDING}?api_key=${API_KEY}&page=${this.page}`)\r\n      .then(response => response.json())\r\n      .then(movies => {\r\n        this.totalPagas = movies.total_pages;\r\n        console.log(movies);\r\n        console.log(this.totalPagas);\r\n        return movies;\r\n      });\r\n  }\r\n  // получение массива Видимых страниц / Оставлено до лучших времён\r\n  // pagination(current, last) {\r\n  //   let indexArray = [1];\r\n  //   for (let i = current - this.#delta; i <= current + this.#delta; i++) {\r\n  //     if (i > 1 && i < last) {\r\n  //       indexArray.push(i);\r\n  //     }\r\n  //   }\r\n  //   indexArray.push(last);\r\n  //   console.log(`привет ${indexArray}`);\r\n  //   return indexArray;\r\n  // }\r\n\r\n  // сборная солянки\r\n  pagination(current, last) {\r\n    let code = this.addButtonWithIndex(1);\r\n\r\n    if (current - this.#delta > 2) code += this.addButtonInput();\r\n\r\n    for (let i = current - this.#delta; i <= current + this.#delta; i++) {\r\n      if (i > 1 && i < last) {\r\n        code += this.addButtonWithIndex(i);\r\n      }\r\n    }\r\n\r\n    if (current + this.#delta < last - 1) code += this.addButtonInput();\r\n\r\n    code += this.addButtonWithIndex(last);\r\n\r\n    this.selectControl.innerHTML = code;\r\n  }\r\n\r\n  addButtonWithIndex(index) {\r\n    return ` <li class=\"pagination-controls__item\"><button id='pagination_${index}' class='pagination-controls__btn' type='button'>${index}</button></li>`;\r\n  }\r\n  addButtonInput() {\r\n    return ` <li class=\"pagination-controls__item\"><input class=\"pagination-controls__input\" type=\"number\" placeholder=\"...\" /></li>`;\r\n  }\r\n\r\n  fetchWatchedMoviesList() {}\r\n  fetchQueueMoviesList() {}\r\n  fetchModalMovie() {}\r\n\r\n  loadWatchedMovies() {\r\n    //после вызова функции в this._watchedFromLocalStorage будет массив с localStorage\r\n    const watchedString = localStorage.getItem('watched');\r\n    this._watchedFromLocalStorage = JSON.parse(watchedString);\r\n  }\r\n\r\n  loadQueueMovies() {\r\n    //после вызова функции в this._queue будет массив с localStorage\r\n    const queueString = localStorage.getItem('queue');\r\n    this._queueFromLocalStorage = JSON.parse(queueString);\r\n  }\r\n  get watchedFromLocalStorage() {\r\n    //для проверки\r\n    return this._watchedFromLocalStorage;\r\n  }\r\n  get queueFromLocalStorage() {\r\n    //для проверки\r\n    return this._queueFromLocalStorage;\r\n  }\r\n\r\n  addWatchedMovies(movieId) {}\r\n  addQueueMovies(movieId) {\r\n    this.queue.push(movieId);\r\n    localStorage.setItem('queue', JSON.stringify(this.queue));\r\n  }\r\n\r\n  renderMovieCards(moviesArray) {\r\n    refs.moviesCardsGallery.insertAdjacentHTML(\r\n      'beforeend',\r\n      movieCard(moviesArray),\r\n    );\r\n  }\r\n\r\n  renderMovie(movieObj) {}\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  }\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n\r\n  goToPrevPage() {\r\n    if (this.page === 1) {\r\n      return;\r\n    }\r\n    this.page -= 1;\r\n  }\r\n\r\n  goToNextPage() {\r\n    if (this.page === this.totalPagas + 1) {\r\n      return;\r\n    }\r\n    this.page += 1;\r\n  }\r\n}\r\n","import '@pnotify/core/dist/BrightTheme.css';\r\n\r\nconst { error } = require('@pnotify/core');\r\nconst { defaults } = require('@pnotify/core');\r\ndefaults.closer = false;\r\ndefaults.sticker = false;\r\ndefaults.delay = 2000;\r\ndefaults.shadow = true;\r\n\r\nfunction pluginError() {\r\n  return error({\r\n    text: 'Please enter CORRECT query',\r\n  });\r\n}\r\n\r\nexport { pluginError };\r\n","import './main.scss';\r\nimport refs from './js/refs'; /* ждём, пока у нас появятся все нужные имена классов для querySelector */\r\nimport ApiService from './js/api';\r\nconst debounce = require('lodash.debounce');\r\nimport { pluginError } from './js/pluginOn';\r\n\r\nconst Api = new ApiService(refs.paginationControls);\r\n\r\nwindow.addEventListener('load', loadPage);\r\n\r\nrefs.btnPrevPagination.addEventListener('click', () => {\r\n  Api.goToPrevPage();\r\n  if (!Api.searchQuery) {\r\n    return fetchPopularMoviesListTEST();\r\n  }\r\n  // console.log(refs.searchInput.value);\r\n  onSearchTEST();\r\n});\r\nrefs.btnNextPagination.addEventListener('click', () => {\r\n  Api.goToNextPage();\r\n  if (!Api.searchQuery) {\r\n    return fetchPopularMoviesListTEST();\r\n  }\r\n  onSearchTEST(), console.log(Api.page);\r\n});\r\nrefs.paginationControls.addEventListener('click', event => {\r\n  if (event.target.nodeName === 'BUTTON') {\r\n    const a = Number(event.target.textContent);\r\n    if (!Api.searchQuery) {\r\n      return goToPage(a);\r\n    }\r\n    goToPageOnSearch(a), console.log(Api.page);\r\n  }\r\n  if (event.target.nodeName === 'INPUT') {\r\n    const a = Number(event.target.value);\r\n    if (!Api.searchQuery) {\r\n      return goToPage(a);\r\n    }\r\n    goToPageOnSearch(a), console.log(Api.page);\r\n  }\r\n});\r\n\r\n// console.log(refs.btnNextPagination, refs.btnPrevPagination);\r\n//Функция проверки текущей страницы\r\nfunction loadPage() {\r\n  const currentPage = document.getElementsByTagName('html')[0];\r\n  if (currentPage.classList.contains('main-page')) {\r\n    fetchPopularMoviesList();\r\n    refs.searchInput.addEventListener('input', debounce(onSearch, 500));\r\n  }\r\n  if (currentPage.classList.contains('library-page')) {\r\n    refs.loadWatchedBtn.addEventListener('click', loadWatched);\r\n    refs.loadQueueBtn.addEventListener('click', loadQueue);\r\n    loadWatched(); //по умолчанию, отрисовываются просмотренные фильмы\r\n  }\r\n}\r\n//Функция запроса популярных фильмов и отрисовка галлереи карточек - запускается при загрузке главной страницы\r\nfunction fetchPopularMoviesList() {\r\n  clear();\r\n  Api.resetPage();\r\n  Api.fetchPopularMoviesList().then(movies => movieAdaptedandRender(movies));\r\n  Api.pagination(Api.page, Api.totalPagas);\r\n  // currentBtnPagination();\r\n}\r\n\r\nfunction fetchPopularMoviesListTEST() {\r\n  clear();\r\n  Api.fetchPopularMoviesList().then(movies => movieAdaptedandRender(movies));\r\n  Api.pagination(Api.page, Api.totalPagas);\r\n  // currentBtnPagination();\r\n}\r\n//Функция поиска фильмов по слову - запускается по вводу в инпуте\r\nfunction onSearch(event) {\r\n  event.preventDefault();\r\n  clear();\r\n  Api.resetPage();\r\n  Api.searchQuery = event.target.value;\r\n  console.log('Api.searchQuery:', Api.searchQuery); //что ищем???\r\n  if (!Api.searchQuery) {\r\n    return fetchPopularMoviesList();\r\n  }\r\n  Api.fetchSearchMoviesList(Api.searchQuery).then(movies => {\r\n    movieAdaptedandRender(movies);\r\n    Api.pagination(Api.page, Api.totalPagas);\r\n    // currentBtnPagination();\r\n    if (!movies.total_results) {\r\n      return pluginError();\r\n    }\r\n  });\r\n}\r\nfunction onSearchTEST() {\r\n  clear();\r\n  Api.searchQuery = refs.searchInput.value;\r\n  console.log('Api.searchQuery:', Api.searchQuery); //что ищем???\r\n  Api.fetchSearchMoviesList(Api.searchQuery).then(movies => {\r\n    movieAdaptedandRender(movies);\r\n    Api.pagination(Api.page, Api.totalPagas);\r\n    // currentBtnPagination();\r\n    if (!movies.total_results) {\r\n      return pluginError();\r\n    }\r\n  });\r\n}\r\n\r\n//Функция очистки галлереи фильмов\r\nfunction clear() {\r\n  refs.moviesCardsGallery.innerHTML = '';\r\n}\r\n//Функция адаптации пути img и отрисовка\r\nfunction movieAdaptedandRender(movies) {\r\n  console.log(movies.results);\r\n  const moviesArray = movies.results.map(movie => Api.movieAdapter(movie));\r\n  return Api.renderMovieCards(moviesArray);\r\n}\r\n\r\n//Функция отрисовывает просмотренные фильмы пользователя\r\nfunction loadWatched() {\r\n  clear();\r\n  Api.resetPage();\r\n  refs.loadWatchedBtn.classList.add('active-btn');\r\n  refs.loadQueueBtn.classList.remove('active-btn');\r\n  console.log('отрисовать просмотренные фильмы');\r\n  Api.fetchWatchedMoviesList().then(movies => movieAdaptedandRender(movies));\r\n}\r\n//Функция отрисовывает фильмы добавленные в очередь пользователя\r\nfunction loadQueue() {\r\n  clear();\r\n  Api.resetPage();\r\n  refs.loadWatchedBtn.classList.remove('active-btn');\r\n  refs.loadQueueBtn.classList.add('active-btn');\r\n  console.log('отрисовать фильмы добавленные в очередь пользователя');\r\n  Api.fetchQueueMoviesList().then(movies => movieAdaptedandRender(movies));\r\n}\r\n\r\nfunction goToPage(index) {\r\n  if (index < 1 || index >= Api.totalPagas) {\r\n    return;\r\n  }\r\n  Api.page = index;\r\n  fetchPopularMoviesListTEST();\r\n}\r\nfunction goToPageOnSearch(index) {\r\n  if (index < 1 || index >= Api.totalPagas) {\r\n    return;\r\n  }\r\n  Api.page = index;\r\n  onSearchTEST();\r\n}\r\n// function currentBtnPagination() {\r\n//   a = document.querySelector(`\"#pagination_${Api.page}\"`);\r\n//   a.classList.add('active');\r\n// }\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"movie__list-item\\\">\\r\\n    <div class=\\\"movie-card__wrapper-img\\\">\\r\\n        <img class=\\\"movie-card__img\\\" src=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"imgSrc\") || (depth0 != null ? lookupProperty(depth0,\"imgSrc\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"imgSrc\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":41},\"end\":{\"line\":6,\"column\":51}}}) : helper)))\n    + \" alt=''>\\r\\n    </div>\\r\\n    <h3 class=\\\"movie-card__name\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":33},\"end\":{\"line\":8,\"column\":42}}}) : helper)))\n    + \"</h3>\\r\\n    <p class=\\\"movie-card__description\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"releaseDate\") || (depth0 != null ? lookupProperty(depth0,\"releaseDate\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"releaseDate\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":39},\"end\":{\"line\":9,\"column\":54}}}) : helper)))\n    + \"</p>\\r\\n    <p class=\\\"movie-card__rating\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"rating\") || (depth0 != null ? lookupProperty(depth0,\"rating\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"rating\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":34},\"end\":{\"line\":10,\"column\":44}}}) : helper)))\n    + \"</p>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":0},\"end\":{\"line\":12,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"pagination-controls__item\\\">\\r\\n    <button id='pagination_\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"key\") || (depth0 != null ? lookupProperty(depth0,\"key\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"key\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":27},\"end\":{\"line\":3,\"column\":34}}}) : helper)))\n    + \"' type='input' class=\\\"pagination-controls__btn\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"key\") || (depth0 != null ? lookupProperty(depth0,\"key\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"key\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":82},\"end\":{\"line\":3,\"column\":89}}}) : helper)))\n    + \"</button>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":5,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}